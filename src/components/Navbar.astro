---
import { Image } from 'astro:assets';
// Importamos el bot√≥n de React
import AuthButton from './react/AuthButton.jsx';
---

<nav class="sticky top-0 z-50 bg-[#FFF5E1]/95 backdrop-blur-md shadow-md border-b-4 border-primary/40">
  <div class="max-w-7xl mx-auto px-4 md:px-6">
    <div class="flex justify-between items-center h-24">
      
      {/* 1. LOGO (Tus estilos originales intactos) */}
      <a href="/" class="relative z-10 flex items-center gap-3 group text-decoration-none">
        <span class="text-4xl md:text-5xl filter drop-shadow-md animate-bounce duration-[2000ms]">
          üßÅ
        </span> 
        <div class="flex flex-col items-start pt-2">
          <span class="font-script text-5xl md:text-6xl text-[#A0522D] transform -rotate-2 origin-left drop-shadow-sm transition-transform group-hover:scale-105 group-hover:text-primary leading-[0.8]">
            Don Sebasti√°n
          </span>
          <span class="text-[10px] md:text-xs text-primary font-sans font-bold tracking-[0.2em] uppercase mt-1 ml-2">
            Postres y Tortas ‚Ä¢ Arequipa
          </span>
        </div>
      </a>

      {/* 2. PENDIENTE COLGANTE (Donita) 
          Nota: "pointer-events-none" asegura que los clics pasen a trav√©s de ella 
          y no bloqueen el bot√≥n del men√∫. */}
      <div class="absolute top-0 right-4 md:right-[15%] block animate-swing origin-top pointer-events-none z-50">
         <div class="h-16 w-0.5 bg-primary/60 mx-auto"></div>
         <svg width="45" height="45" viewBox="0 0 45 45" fill="none" class="-mt-1 drop-shadow-lg">
            <circle cx="22.5" cy="22.5" r="20" fill="#D2691E" stroke="#3E2723" stroke-width="2"/>
            <circle cx="22.5" cy="22.5" r="7" fill="#FFF5E1" stroke="#3E2723" stroke-width="2"/>
            <path d="M15 15L17 17" stroke="#FFD700" stroke-width="2" stroke-linecap="round"/>
            <path d="M30 30L32 32" stroke="#FFD700" stroke-width="2" stroke-linecap="round"/>
            <path d="M30 15L28 17" stroke="#FF69B4" stroke-width="2" stroke-linecap="round"/>
         </svg>
      </div>

      {/* 3. MEN√ö ESCRITORIO (PC) */}
      <div class="hidden md:flex items-center space-x-6 font-sans font-bold text-dark/80">
        <a href="#inicio" class="hover:text-primary transition-colors">Inicio</a>
        <a href="#novedades" class="hover:text-primary transition-colors">Novedades</a>
        <a href="#contacto" class="hover:text-primary transition-colors">Vis√≠tanos</a>
        <AuthButton client:load />
      </div>

      {/* 4. BOT√ìN HAMBURGUESA (M√ìVIL) 
          Le puse un ID 'mobile-menu-btn' para que el script lo encuentre. */}
      <button id="mobile-menu-btn" class="md:hidden text-[#3E2723] p-2 focus:outline-none transition-transform active:scale-95">
         <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
         </svg>
      </button>

    </div>
  </div>

  {/* 5. EL MEN√ö DESPLEGABLE M√ìVIL (Esto faltaba) */}
  <div id="mobile-menu" class="hidden md:hidden bg-[#FFF5E1] border-t border-orange-200 shadow-xl absolute w-full left-0 top-full">
      <div class="px-6 py-6 space-y-4 flex flex-col items-center font-sans font-bold text-[#3E2723]">
          <a href="#inicio" class="block text-lg hover:text-[#D2691E]">Inicio</a>
          <a href="#novedades" class="block text-lg hover:text-[#D2691E]">Novedades</a>
          <a href="#contacto" class="block text-lg hover:text-[#D2691E]">Vis√≠tanos</a>
          
          <div class="pt-4 border-t border-orange-200 w-full flex justify-center">
             <AuthButton client:load />
          </div>
      </div>
  </div>
</nav>

{/* 6. EL CEREBRO (SCRIPT) QUE HACE QUE FUNCIONE */}
<script>
    const btn = document.getElementById('mobile-menu-btn');
    const menu = document.getElementById('mobile-menu');

    if (btn && menu) {
        btn.addEventListener('click', () => {
            menu.classList.toggle('hidden');
        });

        // Opcional: Cerrar men√∫ al hacer clic en un enlace
        menu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                menu.classList.add('hidden');
            });
        });
    }
</script>